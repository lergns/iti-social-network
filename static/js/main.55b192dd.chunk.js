(this["webpackJsonpsamurai-path-ts"]=this["webpackJsonpsamurai-path-ts"]||[]).push([[1],{135:function(e,t,n){},18:function(e,t,n){e.exports={nav:"Navbar_nav__g8jcu",item:"Navbar_item__2BmSg",active:"Navbar_active__3YPzP"}},218:function(e,t,n){},224:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=(n(135),n(15)),o=n(59),s=n(74),u=n(28),i=n(24),l=n(82),p=n(80),d=n(5),f=n.n(d),h=n(8),b=n(3),j={isInitialized:!1},O=Object(c.c)({profilePage:o.e,dialoguesPage:s.a,usersPage:u.e,auth:i.a,app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"app/SET_INITIALIZED":return Object(b.a)(Object(b.a)({},e),t.payload);default:return e}},form:p.a}),v=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||c.d,g=Object(c.e)(O,v(Object(c.a)(l.a)));window.store=g;var m=n(42),w=n.n(m),x=n(37),y=n(65),S=n(40),_=n(39),E=n(7),T=(n(218),n(14)),P=n(53),I=n.n(P),k=n(2),C=a.a.memo((function(e){var t=e.isAuth,n=e.login,r=e.logout;return Object(k.jsxs)("header",{className:I.a.header,children:[Object(k.jsx)("img",{src:"https://cdn.logo.com/hotlink-ok/logo-social-sq.png",alt:"Logo"}),Object(k.jsx)("div",{className:I.a.loginBlock,children:t?Object(k.jsxs)("div",{children:[n," - ",Object(k.jsx)("button",{onClick:r,children:"Log out"})]}):Object(k.jsx)(T.b,{to:"/login",children:"Log in"})})]})})),N=n(21),L=n(46),A=function(e){Object(S.a)(n,e);var t=Object(_.a)(n);function n(){var e;Object(x.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).render=function(){return Object(k.jsx)(C,Object(b.a)({},e.props))},e}return n}(a.a.PureComponent),U=Object(N.b)((function(e){return{isAuth:Object(L.c)(e),login:Object(L.d)(e)}}),{logout:i.d})(A),R=n(18),D=n.n(R),F=function(){return Object(k.jsxs)("nav",{className:D.a.nav,children:[Object(k.jsx)("div",{className:D.a.item,children:Object(k.jsx)(T.b,{to:"/profile",activeClassName:D.a.active,children:"Profile"})}),Object(k.jsx)("div",{className:D.a.item,children:Object(k.jsx)(T.b,{to:"/dialogues",activeClassName:D.a.active,children:"Dialogues"})}),Object(k.jsx)("div",{className:D.a.item,children:Object(k.jsx)(T.b,{to:"/users",activeClassName:D.a.active,children:"Users"})})]})},z=n(41),H=function(e){return e.app.isInitialized};function G(e){return function(t){return Object(k.jsx)(r.Suspense,{fallback:Object(k.jsx)(z.a,{}),children:Object(k.jsx)(e,Object(b.a)({},t))})}}var M=a.a.lazy((function(){return n.e(6).then(n.bind(null,303))})),W=a.a.lazy((function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,302))})),B=a.a.lazy((function(){return n.e(5).then(n.bind(null,304))})),J=a.a.lazy((function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,305))})),Z=function(e){Object(S.a)(n,e);var t=Object(_.a)(n);function n(){var e;Object(x.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).catchUnhandledRejections=function(e){console.warn("UNHANDLED PROMISE REJECTION: ".concat(e.reason))},e.render=function(){return e.props.isInitialized?Object(k.jsxs)("div",{className:"app-wrapper",children:[Object(k.jsx)(U,{}),Object(k.jsx)(F,{}),Object(k.jsx)("div",{className:"app-wrapper-content",children:Object(k.jsxs)(E.d,{children:[Object(k.jsx)(E.b,{path:"/profile/:userID?",render:G(W)}),Object(k.jsx)(E.b,{path:"/dialogues",render:G(B)}),Object(k.jsx)(E.b,{path:"/users",render:G(M)}),Object(k.jsx)(E.b,{path:"/login",render:G(J)}),Object(k.jsx)(E.a,{from:"/",to:"/profile"}),Object(k.jsx)(E.a,{from:"*",to:"/profile"})]})})]}):Object(k.jsx)(z.a,{})},e}return Object(y.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp(),window.addEventListener("unhandledrejection",this.catchUnhandledRejections)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("unhandledrejection",this.catchUnhandledRejections)}}]),n}(a.a.PureComponent),V=Object(c.d)(Object(N.b)((function(e){return{isInitialized:H(e)}}),{initializeApp:function(){return function(){var e=Object(h.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t(Object(i.b)());case 3:t({type:"app/SET_INITIALIZED",payload:{isInitialized:!0}}),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.warn(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()}}),E.g)(Z);w.a.render(Object(k.jsx)(T.a,{children:Object(k.jsx)(N.a,{store:g,children:Object(k.jsx)(V,{})})}),document.getElementById("root"))},24:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return b})),n.d(t,"d",(function(){return j}));var r=n(5),a=n.n(r),c=n(8),o=n(3),s=n(6),u=n(44),i=n(28),l={id:null,login:null,email:null,isAuth:!1,captchaURL:null},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"auth/SET_AUTH_USER_DATA":case"auth/SET_CAPTCHA_URL":return Object(o.a)(Object(o.a)({},e),t.payload);default:return e}},d=function(e,t,n,r){return{type:"auth/SET_AUTH_USER_DATA",payload:{id:e,email:t,login:n,isAuth:r}}},f=function(e){return{type:"auth/SET_CAPTCHA_URL",payload:{captchaURL:e}}},h=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r,c,o,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.b.me();case 3:(n=e.sent).resultCode===s.a.Success&&(r=n.data,c=r.id,o=r.email,u=r.login,t(d(c,o,u,!0))),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn(e.t0),alert("An error has occurred. Please try again later.");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},b=function(e,t,n,r){return function(){var o=Object(c.a)(a.a.mark((function c(o){var l,p;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,s.b.login(e,t,n,r);case 3:(l=a.sent).resultCode===s.a.Success?(o(h()),o(Object(i.c)(1))):(l.resultCode===s.a.Captcha&&o(O()),p=l.messages.length?l.messages[0]:"Incorrect log in data",alert(p),o(Object(u.a)("loginForm",{_error:p}))),a.next=11;break;case 7:a.prev=7,a.t0=a.catch(0),console.warn(a.t0),alert("An error has occurred. Please try again later.");case 11:case"end":return a.stop()}}),c,null,[[0,7]])})));return function(e){return o.apply(this,arguments)}}()},j=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.b.logout();case 3:(n=e.sent).resultCode===s.a.Success?(t(d(null,null,null,!1)),t(f(null)),t(Object(i.c)(1))):(r=n.messages[0],alert(r),console.warn(r)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn(e.t0),alert("An error has occurred. Please try again later.");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},O=function(){return function(){var e=Object(c.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.d.getCaptcha();case 3:n=e.sent,r=n.url,t(f(r)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.warn(e.t0),alert("An error has occurred. Please try again later.");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}},28:function(e,t,n){"use strict";n.d(t,"e",(function(){return l})),n.d(t,"c",(function(){return f})),n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return O})),n.d(t,"d",(function(){return v}));var r=n(5),a=n.n(r),c=n(8),o=n(20),s=n(3),u=n(6),i={users:[],pageSize:100,totalUsersCount:0,currentPage:1,isFetching:!1,followingInProgress:[]},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"users/FOLLOW":return Object(s.a)(Object(s.a)({},e),{},{users:e.users.map((function(e){return e.id===t.payload.userID?Object(s.a)(Object(s.a)({},e),{},{followed:!0}):e}))});case"users/UNFOLLOW":return Object(s.a)(Object(s.a)({},e),{},{users:e.users.map((function(e){return e.id===t.payload.userID?Object(s.a)(Object(s.a)({},e),{},{followed:!1}):e}))});case"users/SET_USERS":case"users/SET_CURRENT_PAGE":case"users/SET_TOTAL_USERS_COUNT":case"users/SET_IS_FETCHING":return Object(s.a)(Object(s.a)({},e),t.payload);case"users/SET_FOLLOWING_PROGRESS":return Object(s.a)(Object(s.a)({},e),{},{followingInProgress:t.payload.followingInProgress?[].concat(Object(o.a)(e.followingInProgress),[t.payload.userID]):e.followingInProgress.filter((function(e){return e!==t.payload.userID}))});default:return e}},p=function(e){return{type:"users/FOLLOW",payload:{userID:e}}},d=function(e){return{type:"users/UNFOLLOW",payload:{userID:e}}},f=function(e){return{type:"users/SET_CURRENT_PAGE",payload:{currentPage:e}}},h=function(e){return{type:"users/SET_IS_FETCHING",payload:{newIsFetching:e}}},b=function(e,t){return{type:"users/SET_FOLLOWING_PROGRESS",payload:{userID:e,followingInProgress:t}}},j=function(e,t){return function(){var n=Object(c.a)(a.a.mark((function n(r){var c,o;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(h(!0)),n.prev=1,n.next=4,u.e.getUsers(e,t);case 4:(c=n.sent).error?(o=c.error,alert(o),console.warn(o)):(r({type:"users/SET_USERS",payload:{users:c.items}}),r({type:"users/SET_TOTAL_USERS_COUNT",payload:{totalUsersCount:c.totalCount}})),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),console.warn(n.t0);case 11:r(h(!1));case 12:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}()},O=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(b(e,!0)),t.prev=1,t.next=4,u.e.follow(e);case 4:(r=t.sent).resultCode===u.a.Success?n(p(e)):(c=r.messages[0],alert(c),console.warn(c)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.warn(t.t0);case 11:n(b(e,!1));case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},v=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(b(e,!0)),t.prev=1,t.next=4,u.e.unfollow(e);case 4:(r=t.sent).resultCode===u.a.Success?n(d(e)):(c=r.messages[0],alert(c),console.warn(c)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.warn(t.t0);case 11:n(b(e,!1));case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}},41:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n(0);var r=n.p+"static/media/preloader.f1283d50.gif",a=n(85),c=n.n(a),o=n(2),s=function(){return Object(o.jsx)("img",{src:r,className:c.a.preloader,alt:"Loading"})}},46:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return o}));var r=function(e){return e.auth.id},a=function(e){return e.auth.isAuth},c=function(e){return e.auth.login},o=function(e){return e.auth.captchaURL}},53:function(e,t,n){e.exports={header:"Header_header__2ZhVC",loginBlock:"Header_loginBlock__1o6Be"}},59:function(e,t,n){"use strict";n.d(t,"e",(function(){return l})),n.d(t,"a",(function(){return p})),n.d(t,"b",(function(){return d})),n.d(t,"d",(function(){return h})),n.d(t,"c",(function(){return b})),n.d(t,"g",(function(){return j})),n.d(t,"f",(function(){return O}));var r=n(5),a=n.n(r),c=n(8),o=n(20),s=n(3),u=n(6),i={posts:[{id:1,postText:"what's up?",likesCount:3},{id:2,postText:"hey!",likesCount:1}],userProfile:{},status:""},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"profile/ADD_POST":var n=Object(s.a)(Object(s.a)({},e),{},{posts:Object(o.a)(e.posts)}),r={id:n.posts.length+1,postText:t.payload.newPostText,likesCount:0};return Object(s.a)(Object(s.a)({},n),{},{posts:[r].concat(Object(o.a)(n.posts))});case"profile/DELETE_POST":return Object(s.a)(Object(s.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!==t.payload.postID}))});case"profile/SET_USER_PROFILE":case"profile/SET_PROFILE_STATUS":return Object(s.a)(Object(s.a)({},e),t.payload);case"profile/SET_PROFILE_PHOTO":return Object(s.a)(Object(s.a)({},e),{},{userProfile:Object(s.a)(Object(s.a)({},e.userProfile),{},{photos:t.payload.photos})});default:return e}},p=function(e){return{type:"profile/ADD_POST",payload:{newPostText:e}}},d=function(e){return{type:"profile/DELETE_POST",payload:{postID:e}}},f=function(e){return{type:"profile/SET_PROFILE_STATUS",payload:{status:e}}},h=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.c.getProfile(e);case 3:r=t.sent,n({type:"profile/SET_USER_PROFILE",payload:{userProfile:r}}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.warn(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},b=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.c.getStatus(e);case 3:r=t.sent,n(f(r)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.warn(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},j=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.c.updateStatus(e);case 3:(r=t.sent).resultCode===u.a.Success?n(f(e)):(c=r.messages[0],alert(c),console.warn(c)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.warn(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},O=function(e){return function(){var t=Object(c.a)(a.a.mark((function t(n){var r,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.c.updatePhoto(e);case 3:(r=t.sent).resultCode===u.a.Success?n({type:"profile/SET_PROFILE_PHOTO",payload:{photos:r.data.photos}}):(c=r.messages[0],alert(c),console.warn(c)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.warn(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}},6:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return l}));var r,a=n(81),c=n.n(a);!function(e){e[e.Success=0]="Success",e[e.Error=1]="Error",e[e.Captcha=10]="Captcha"}(r||(r={}));var o=c.a.create({headers:{"API-KEY":"264a0581-6cdc-4a28-9b7e-b8b5b1060aa0"},baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0}),s={getUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return o.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},follow:function(e){return o.post("follow/".concat(e)).then((function(e){return e.data}))},unfollow:function(e){return o.delete("follow/".concat(e)).then((function(e){return e.data}))}},u={getProfile:function(e){return o.get("profile/".concat(e)).then((function(e){return e.data}))},getStatus:function(e){return o.get("profile/status/".concat(e)).then((function(e){return e.data}))},updateStatus:function(e){return o.put("profile/status",{status:e}).then((function(e){return e.data}))},updatePhoto:function(e){var t=new FormData;return t.append("image",e),o.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e.data}))}},i={me:function(){return o.get("auth/me").then((function(e){return e.data}))},login:function(e,t,n,r){return o.post("/auth/login",{email:e,password:t,rememberMe:n,captcha:r}).then((function(e){return e.data}))},logout:function(){return o.delete("/auth/login").then((function(e){return e.data}))}},l={getCaptcha:function(){return o.get("security/get-captcha-url").then((function(e){return e.data}))}}},74:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return s}));var r=n(20),a=n(3),c={dialogues:[{id:1,personName:"Stacy"},{id:2,personName:"Gracy"},{id:3,personName:"Mike"},{id:4,personName:"Sam"},{id:5,personName:"Sanya"}],messages:[{id:1,messageText:"Hola!"},{id:2,messageText:"Meow"},{id:3,messageText:"What's up?"},{id:4,messageText:"Where have you been?"},{id:5,messageText:"See you soon!"}]},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"dialogues/SEND_MESSAGE":var n=Object(a.a)(Object(a.a)({},e),{},{messages:Object(r.a)(e.messages)});return n.messages.push({id:n.messages.length+1,messageText:t.payload.newMessageText}),n;default:return e}},s=function(e){return{type:"dialogues/SEND_MESSAGE",payload:{newMessageText:e}}}},85:function(e,t,n){e.exports={preloader:"Preloader_preloader__1E9dh"}}},[[224,2,3]]]);
//# sourceMappingURL=main.55b192dd.chunk.js.map