(this["webpackJsonpsamurai-path-ts"]=this["webpackJsonpsamurai-path-ts"]||[]).push([[1],{12:function(e,t,n){e.exports={nav:"Navbar_nav__g8jcu",item:"Navbar_item__2BmSg",active:"Navbar_active__3YPzP"}},135:function(e,t,n){},218:function(e,t,n){},224:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=(n(135),n(16)),c=n(65),o=n(74),u=n(29),i=n(24),l=n(82),p=n(80),f=n(5),d=n.n(f),h=n(8),b=n(3),j={isInitialized:!1},O=function(e){return{type:"app/SET_INITIALIZED",payload:{isInitialized:e}}},v=Object(s.c)({profilePage:c.d,dialoguesPage:o.b,usersPage:u.e,auth:i.a,app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"app/SET_INITIALIZED":return Object(b.a)(Object(b.a)({},e),t.payload);default:return e}},form:p.a}),g=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||s.d,m=Object(s.e)(v,g(Object(s.a)(l.a)));window.store=m;var x=n(42),w=n.n(x),S=n(37),y=n(64),_=n(40),E=n(39),T=n(7),P=(n(218),n(13)),C=n(53),N=n.n(C),I=n(2),U=a.a.memo((function(e){var t=e.isAuth,n=e.login,r=e.logout;return Object(I.jsxs)("header",{className:N.a.header,children:[Object(I.jsx)("img",{src:"https://cdn.logo.com/hotlink-ok/logo-social-sq.png",alt:"Logo"}),Object(I.jsx)("div",{className:N.a.loginBlock,children:t?Object(I.jsxs)("div",{children:[n," -"," ",Object(I.jsx)("button",{style:{cursor:"pointer"},onClick:r,children:"Log out"})]}):Object(I.jsx)(P.b,{to:"/login",children:"Log in"})})]})})),k=n(21),L=n(43),A=function(e){Object(_.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(S.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).render=function(){return Object(I.jsx)(U,Object(b.a)({},e.props))},e}return n}(a.a.PureComponent),R=Object(k.b)((function(e){return{isAuth:Object(L.c)(e),login:Object(L.d)(e)}}),{logout:i.d})(A),D=n(12),F=n.n(D),z=function(){return Object(I.jsxs)("nav",{className:F.a.nav,children:[Object(I.jsx)("div",{className:F.a.item,children:Object(I.jsx)(P.b,{to:"/profile",activeClassName:F.a.active,children:"Profile"})}),Object(I.jsx)("div",{className:F.a.item,children:Object(I.jsx)(P.b,{to:"/dialogues",activeClassName:F.a.active,children:"Dialogues"})}),Object(I.jsx)("div",{className:F.a.item,children:Object(I.jsx)(P.b,{to:"/users",activeClassName:F.a.active,children:"Users"})}),Object(I.jsx)("div",{className:F.a.item,children:Object(I.jsx)(P.b,{to:"/news",activeClassName:F.a.active,children:"News"})}),Object(I.jsx)("div",{className:F.a.item,children:Object(I.jsx)(P.b,{to:"/settings",activeClassName:F.a.active,children:"Settings"})})]})},M=n(41),H=function(e){return e.app.isInitialized};function G(e){return function(t){return Object(I.jsx)(r.Suspense,{fallback:Object(I.jsx)(M.a,{}),children:Object(I.jsx)(e,Object(b.a)({},t))})}}var W=G(a.a.lazy((function(){return n.e(6).then(n.bind(null,304))}))),B=G(a.a.lazy((function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,302))}))),J=G(a.a.lazy((function(){return Promise.all([n.e(0),n.e(5)]).then(n.bind(null,303))}))),Z=G(a.a.lazy((function(){return Promise.all([n.e(0),n.e(7)]).then(n.bind(null,305))}))),V=function(e){Object(_.a)(n,e);var t=Object(E.a)(n);function n(){var e;Object(S.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).catchUnhandledRejections=function(e){console.warn("UNHANDLED PROMISE REJECTION: ".concat(e.reason))},e.render=function(){return e.props.isInitialized?Object(I.jsxs)("div",{className:"app-wrapper",children:[Object(I.jsx)(R,{}),Object(I.jsx)(z,{}),Object(I.jsx)("div",{className:"app-wrapper-content",children:Object(I.jsxs)(T.d,{children:[Object(I.jsx)(T.b,{path:"/profile/:userID?",render:function(){return Object(I.jsx)(B,{})}}),Object(I.jsx)(T.b,{path:"/dialogues",render:function(){return Object(I.jsx)(J,{})}}),Object(I.jsx)(T.b,{path:"/users",render:function(){return Object(I.jsx)(W,{})}}),Object(I.jsx)(T.b,{path:"/login",render:function(){return Object(I.jsx)(Z,{})}}),Object(I.jsx)(T.b,{path:"/news",render:function(){return Object(I.jsx)("h1",{children:"News"})}}),Object(I.jsx)(T.b,{path:"/settings",render:function(){return Object(I.jsx)("h1",{children:"Settings"})}}),Object(I.jsx)(T.a,{from:"/",to:"/profile"}),Object(I.jsx)(T.a,{from:"*",to:"/profile"})]})})]}):Object(I.jsx)(M.a,{})},e}return Object(y.a)(n,[{key:"componentDidMount",value:function(){this.props.initializeApp(),window.addEventListener("unhandledrejection",this.catchUnhandledRejections)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("unhandledrejection",this.catchUnhandledRejections)}}]),n}(a.a.PureComponent),X=Object(s.d)(Object(k.b)((function(e){return{isInitialized:H(e)}}),{initializeApp:function(){return function(){var e=Object(h.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t(Object(i.b)());case 3:t(O(!0)),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.warn(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()}}),T.g)(V);w.a.render(Object(I.jsx)(P.a,{children:Object(I.jsx)(k.a,{store:m,children:Object(I.jsx)(X,{})})}),document.getElementById("root"))},24:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return g})),n.d(t,"d",(function(){return m}));var r=n(5),a=n.n(r),s=n(8),c=n(3),o=n(44),u=n(29),i=n(6),l=function(){return i.b.get("auth/me").then((function(e){return e.data}))},p=function(e,t,n,r){return i.b.post("/auth/login",{email:e,password:t,rememberMe:n,captcha:r}).then((function(e){return e.data}))},f=function(){return i.b.delete("/auth/login").then((function(e){return e.data}))},d=function(){return i.b.get("security/get-captcha-url").then((function(e){return e.data}))},h={id:null,login:null,email:null,isAuth:!1,captchaURL:null},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"auth/SET_AUTH_USER_DATA":case"auth/SET_CAPTCHA_URL":return Object(c.a)(Object(c.a)({},e),t.payload);default:return e}},j=function(e,t,n,r){return{type:"auth/SET_AUTH_USER_DATA",payload:{id:e,email:t,login:n,isAuth:r}}},O=function(e){return{type:"auth/SET_CAPTCHA_URL",payload:{captchaURL:e}}},v=function(){return function(){var e=Object(s.a)(a.a.mark((function e(t){var n,r,s,c,o;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l();case 3:(n=e.sent).resultCode===i.a.Success&&(r=n.data,s=r.id,c=r.email,o=r.login,t(j(s,c,o,!0))),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn(e.t0),alert("An error has occurred. Please try again later.");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},g=function(e,t,n,r){return function(){var c=Object(s.a)(a.a.mark((function s(c){var l,f;return a.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,p(e,t,n,r);case 3:if((l=a.sent).resultCode!==i.a.Success){a.next=10;break}return a.next=7,c(v());case 7:c(u.d.setCurrentPageNumber(1)),a.next=16;break;case 10:if(l.resultCode!==i.a.Captcha){a.next=13;break}return a.next=13,c(x());case 13:f=l.messages.length?l.messages[0]:"Incorrect log in data",alert(f),c(Object(o.a)("loginForm",{_error:f}));case 16:a.next=22;break;case 18:a.prev=18,a.t0=a.catch(0),console.warn(a.t0),alert("An error has occurred. Please try again later.");case 22:case"end":return a.stop()}}),s,null,[[0,18]])})));return function(e){return c.apply(this,arguments)}}()},m=function(){return function(){var e=Object(s.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f();case 3:(n=e.sent).resultCode===i.a.Success?(t(j(null,null,null,!1)),t(O(null)),t(u.d.setCurrentPageNumber(1))):(r=n.messages[0],alert(r),console.warn(r)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.warn(e.t0),alert("An error has occurred. Please try again later.");case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},x=function(){return function(){var e=Object(s.a)(a.a.mark((function e(t){var n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d();case 3:n=e.sent,r=n.url,t(O(r)),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.warn(e.t0),alert("An error has occurred. Please try again later.");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}},29:function(e,t,n){"use strict";n.d(t,"e",(function(){return d})),n.d(t,"d",(function(){return h})),n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return j})),n.d(t,"c",(function(){return O}));var r=n(5),a=n.n(r),s=n(8),c=n(20),o=n(3),u=n(6),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return u.b.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},l=function(e){return u.b.post("follow/".concat(e)).then((function(e){return e.data}))},p=function(e){return u.b.delete("follow/".concat(e)).then((function(e){return e.data}))},f={users:[],pageSize:100,totalUsersCount:0,currentPageNumber:1,isFetching:!1,followingInProgress:[]},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"users/FOLLOW_SUCCESS":return Object(o.a)(Object(o.a)({},e),{},{users:e.users.map((function(e){return e.id===t.payload.userID?Object(o.a)(Object(o.a)({},e),{},{followed:!0}):e}))});case"users/UNFOLLOW_SUCCESS":return Object(o.a)(Object(o.a)({},e),{},{users:e.users.map((function(e){return e.id===t.payload.userID?Object(o.a)(Object(o.a)({},e),{},{followed:!1}):e}))});case"users/SET_USERS":case"users/SET_CURRENT_PAGE_NUMBER":case"users/SET_TOTAL_USERS_COUNT":case"users/SET_IS_FETCHING":return Object(o.a)(Object(o.a)({},e),t.payload);case"users/SET_FOLLOWING_PROGRESS":return Object(o.a)(Object(o.a)({},e),{},{followingInProgress:t.payload.followingInProgress?[].concat(Object(c.a)(e.followingInProgress),[t.payload.userID]):e.followingInProgress.filter((function(e){return e!==t.payload.userID}))});default:return e}},h={followSuccess:function(e){return{type:"users/FOLLOW_SUCCESS",payload:{userID:e}}},unfollowSuccess:function(e){return{type:"users/UNFOLLOW_SUCCESS",payload:{userID:e}}},setUsers:function(e){return{type:"users/SET_USERS",payload:{users:e}}},setCurrentPageNumber:function(e){return{type:"users/SET_CURRENT_PAGE_NUMBER",payload:{currentPageNumber:e}}},setTotalUsersCount:function(e){return{type:"users/SET_TOTAL_USERS_COUNT",payload:{totalUsersCount:e}}},setIsFetching:function(e){return{type:"users/SET_IS_FETCHING",payload:{newIsFetching:e}}},setFollowingProgress:function(e,t){return{type:"users/SET_FOLLOWING_PROGRESS",payload:{userID:e,followingInProgress:t}}}},b=function(e,t){return function(){var n=Object(s.a)(a.a.mark((function n(r){var s,c;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(h.setIsFetching(!0)),n.prev=1,n.next=4,i(e,t);case 4:(s=n.sent).error?(c=s.error,alert(c),console.warn(c)):(r(h.setUsers(s.items)),r(h.setTotalUsersCount(s.totalCount))),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),console.warn(n.t0);case 11:r(h.setIsFetching(!1));case 12:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}()},j=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){var r,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(h.setFollowingProgress(e,!0)),t.prev=1,t.next=4,l(e);case 4:(r=t.sent).resultCode===u.a.Success?n(h.followSuccess(e)):(s=r.messages[0],alert(s),console.warn(s)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.warn(t.t0);case 11:n(h.setFollowingProgress(e,!1));case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},O=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){var r,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(h.setFollowingProgress(e,!0)),t.prev=1,t.next=4,p(e);case 4:(r=t.sent).resultCode===u.a.Success?n(h.unfollowSuccess(e)):(s=r.messages[0],alert(s),console.warn(s)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.warn(t.t0);case 11:n(h.setFollowingProgress(e,!1));case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}},41:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));n(0);var r=n.p+"static/media/preloader.f1283d50.gif",a=n(85),s=n.n(a),c=n(2),o=function(){return Object(c.jsx)("img",{src:r,className:s.a.preloader,alt:"Loading"})}},43:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"b",(function(){return c}));var r=function(e){return e.auth.id},a=function(e){return e.auth.isAuth},s=function(e){return e.auth.login},c=function(e){return e.auth.captchaURL}},53:function(e,t,n){e.exports={header:"Header_header__2ZhVC",loginBlock:"Header_loginBlock__1o6Be"}},6:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c}));var r,a=n(81),s=n.n(a);!function(e){e[e.Success=0]="Success",e[e.Error=1]="Error",e[e.Captcha=10]="Captcha"}(r||(r={}));var c=s.a.create({headers:{"API-KEY":"264a0581-6cdc-4a28-9b7e-b8b5b1060aa0"},baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0})},65:function(e,t,n){"use strict";n.d(t,"d",(function(){return h})),n.d(t,"c",(function(){return b})),n.d(t,"b",(function(){return j})),n.d(t,"a",(function(){return O})),n.d(t,"f",(function(){return v})),n.d(t,"e",(function(){return g}));var r=n(5),a=n.n(r),s=n(8),c=n(20),o=n(3),u=n(6),i=function(e){return u.b.get("profile/".concat(e)).then((function(e){return e.data}))},l=function(e){return u.b.get("profile/status/".concat(e)).then((function(e){return e.data}))},p=function(e){return u.b.put("profile/status",{status:e}).then((function(e){return e.data}))},f=function(e){var t=new FormData;return t.append("image",e),u.b.put("profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){return e.data}))},d={posts:[{id:1,postText:"what's up?",likesCount:3},{id:2,postText:"hey!",likesCount:1}],userProfile:{},status:""},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"profile/ADD_POST":var n=Object(o.a)(Object(o.a)({},e),{},{posts:Object(c.a)(e.posts)}),r={id:n.posts.length+1,postText:t.payload.newPostText,likesCount:0};return Object(o.a)(Object(o.a)({},n),{},{posts:[r].concat(Object(c.a)(n.posts))});case"profile/DELETE_POST":return Object(o.a)(Object(o.a)({},e),{},{posts:e.posts.filter((function(e){return e.id!==t.payload.postID}))});case"profile/SET_USER_PROFILE":case"profile/SET_PROFILE_STATUS":return Object(o.a)(Object(o.a)({},e),t.payload);case"profile/SET_PROFILE_PHOTO":return Object(o.a)(Object(o.a)({},e),{},{userProfile:Object(o.a)(Object(o.a)({},e.userProfile),{},{photos:t.payload.photos})});default:return e}},b={addPost:function(e){return{type:"profile/ADD_POST",payload:{newPostText:e}}},deletePost:function(e){return{type:"profile/DELETE_POST",payload:{postID:e}}},setUserProfile:function(e){return{type:"profile/SET_USER_PROFILE",payload:{userProfile:e}}},setProfileStatus:function(e){return{type:"profile/SET_PROFILE_STATUS",payload:{status:e}}},setProfilePhoto:function(e){return{type:"profile/SET_PROFILE_PHOTO",payload:{photos:e}}}},j=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i(e);case 3:r=t.sent,n(b.setUserProfile(r)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.warn(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},O=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){var r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l(e);case 3:r=t.sent,n(b.setProfileStatus(r)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.warn(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},v=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){var r,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p(e);case 3:(r=t.sent).resultCode===u.a.Success?n(b.setProfileStatus(e)):(s=r.messages[0],alert(s),console.warn(s)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.warn(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},g=function(e){return function(){var t=Object(s.a)(a.a.mark((function t(n){var r,s;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f(e);case 3:(r=t.sent).resultCode===u.a.Success?n(b.setProfilePhoto(r.data.photos)):(s=r.messages[0],alert(s),console.warn(s)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.warn(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}},74:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return o}));var r=n(20),a=n(3),s={dialogues:[{id:1,personName:"Stacy"},{id:2,personName:"Gracy"},{id:3,personName:"Mike"},{id:4,personName:"Sam"},{id:5,personName:"Sanya"}],messages:[{id:1,messageText:"Hola!"},{id:2,messageText:"Meow"},{id:3,messageText:"What's up?"},{id:4,messageText:"Where have you been?"},{id:5,messageText:"See you soon!"}]},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"dialogues/SEND_MESSAGE":var n=Object(a.a)(Object(a.a)({},e),{},{messages:Object(r.a)(e.messages)});return n.messages.push({id:n.messages.length+1,messageText:t.payload.newMessageText}),n;default:return e}},o={sendMessage:function(e){return{type:"dialogues/SEND_MESSAGE",payload:{newMessageText:e}}}}},85:function(e,t,n){e.exports={preloader:"Preloader_preloader__1E9dh"}}},[[224,2,3]]]);
//# sourceMappingURL=main.50692b07.chunk.js.map